# 引子

想象一下有这么表格出现在你的眼前。

你会不会好奇这表格都有什么用呢？

这一切的一切都要追溯到17世纪的数学家纳皮尔，

他在那时候第1次创建了对数表，

大大缓解了人们的计算量。

那你是否好奇这一个对数表背后的原理？它又是如何构造的呢？

我们今天的主题就是这个————纳皮尔的对数表。

我们将走入纳皮尔著作里的世界，实际看看他想法的来源和用处。

从而真正读懂这份表格。

# 作者和著作介绍
我们首先来认识一下纳皮尔和他的著作，

约翰·纳皮尔，（John Napier，1550年2月1日—1617年4月4日），

是苏格兰数学家、物理学家兼天文学家。

他最为人所熟知的是发明对数。

他的1614年的著作《奇妙的对数定理说明书》（The Description of the Wonderful Canon of Logarithms）

首次介绍了对数的定义性质，以及如何使用对数表。

由他儿子整理出版的1619年的著作《奇妙对数定律的构造》（The construction of the wonderful canon of logarithms）

是一本更技术性的著作，讲解了纳皮尔如何构造对数表的具体方法。

# 第一本著作
我们先来看第一本著作的内容，《奇妙对数定理说明书》分为两册内容。

第一册（拉丁文原版）包含五十七页的解释内容和九十页的三角函数及其纳皮尔对数表

第二册讨论了三角学的应用。包括平面三角学和球面三角学。

我们将关注第一册的内容。

我阅读的版本是保存在数学网站十七世纪数学https://www.17centurymaths.com/

由 伊恩·布鲁斯(Ian Bruce) 翻译和注释的英文译本

感谢他无私的贡献和付出。谢谢

而这个对数表根据维基百科的资料，纳皮尔花费了20年的时间计算出来的。

这里面蕴含的内涵其实很简单，就是等比数列和等差数列之间的某种关系。

又或者更符合纳皮尔本人的思考方式来说，

就是匀速运动和等比例衰减运动的对应关系。

这是著作里关于匀速运动的定义和说明。

为了更加直观简洁的说明情况同时更规范使用字母，

我将使用manim动画来展示，代替讲解原文。

首先在空间上存在一个运动的点P

它在某一条直线上运动，

我们规定的起点为A0，初速度为v

由于速度不变，所以相同的时间间隔都是点P运动的距离相同的

那么在时间t内，点P从A0运动到A1，距离为v*t

在时间2t内，点P从A0运动到A2，距离为v*2t

在时间3t内，点P从A0运动到A3，距离为v*3t

随着点P的运动，直线线上有A0，A1 。。。。 An 等距的标记点

我们重点关注这些点等距离的特性。这种等距离的特性正是等差数列的性质。

这里的概念非常简单，相信每个人都能毫不费力理解

接下来我们来看著作里关于等比例衰减运动的定义和说明。

空间上的一个点Q，在一条线段CD上运动，线段总长是L

我们规定的起点为C，B0点就设置为C点，假设点Q运动到Bi点

点Q的运动规律在单位时间内，运动的距离是Bi到端点D的距离的r倍

0<r<1

随着点Q的运动，线上有B0，B1 。。。。 Bn 标记点，这些点就不是等距离的了

但是满足

B0 到 B1的距离是B0 到 D距离的r倍

B1 到 B2的距离是B1 到 D距离的r倍

B2 到 B3的距离是B2 到 D距离的r倍

这种运动方式着实怪异，这不是是匀减速运动，

稍加一想就不对了，

因为匀减速运动的速度是逐渐减小的，最终速度会到零，并且开始反向运动

可这运动可以无限靠近线段的另一端，却永远也无法到达，

更不用说反向运动了，这显然不是匀减速运动。

这种运动方式满足等比数列的性质。

相邻两个点的距离组成的数列，是等比数列

运动的点到端点D的距离组成的数列，也是等比数列

B0 到 B1的距离根据定义是 r * L 

所以|B1D| = L(1 - r)

B1 到 B2的距离是根据定义等于 r|B1D| 等于 rL*(1-r)^1

而B2到D的距离应该是

|B2D| = |B1D| - r * |B1D| = L(1 - r)^2

B2 到 B3的距离根据定义是 r|B2D|等于 rL*(1-r)^2

而B3到D的距离应该是

|B3D| = |B2D| - r * |B2D| = L(1 - r)^3

以此类推，Bn 到 Bn+1的距离是 等于 rL*(1-r)^n

这是一个以rL为首项，以1-r为公比的等比数列。

以此类推，Bn 到 D的距离是 等于 L*(1-r)^n

这是一个以L为首项，以1-r为公比的等比数列。

在上述两种运动的基础上，我们可以介绍纳皮尔对数的定义了。

在上面我们介绍了两个点的两种运动方式，

一个很自然的想法是我们可以把每一种的运动的每一个点对应起来，

不过出于简单和避免未知的问题，

我们将首先设定两点的初始速度为一样，都为v。

让匀速运动和等比例衰减运动这两种运动同步起来。

不过在纳皮尔的脑海中，不是简单的A0-B0对应，A1-B1对应，A2-B2对应。

而是线段长与点的一一对应关系。

假设，两个点P、Q，同步运动，此时分别运动到了Ai、Bi点

纳皮尔将Bi到线段端点D的距离，与A0到Ai的距离联系起来，一一对应起来。

并且称|A0Ai|就是长度|BiD|的对数。

我们这里简单的记录为：

Ai = Naplog(|BiD|)

这个定义，纳皮尔并没有给出具体的计算过程。

这里我们展示纳皮尔对数的英文译本中的定义。

在这个定义，两个看似风马牛不相及的东西联系到了一起

不过在随后的探索中，我们会发现，我们联系到一起的一对数，

竟然能够有如此多美妙的特性，从而帮了我们很大忙。

不过还是先让我们看看这个定义有哪些奇特的地方。

首先考虑两个点初始还未开始运动的情况，

此时，Ai = A0，Bi = B0，|A0A0| = 0，|B0D| = L

所以，Naplog(L) = 0

接下来我们考虑两个点开始运动的情况，

一个单位时间间隔后，点P运动到了A1，点Q运动到了B1

此时，|A0A1| = vt，|B1D| = L - r * L = L * (1 - r)

所以，Naplog(L * (1 - r)) = vt

以此类推，我们甚至可以考虑无穷大的时间后，

点Q运动到了点D，

而点P将会运动到无穷远处。

此时Naplog(0) = 无穷大

我们来设置一组参数来制作一个表格，这个表格将会很有趣。

我们设置v=1，L=1（e为自然指数） ## r 设置有错误。

于是我们可以得到这样一个表格

    t   |A0P|   |QD|    Naplog(|QD|)

    0   0     1    0

    1   1     1-r  1

    2   2     (1-r)^2  2

    3   3     (1-r)^3  3

    inf   inf   0    inf

观察这个表格，我们可以发现，Naplog操作将等比数列的上标

与等差数列的下标联系了起来。

如果我们熟悉对数函数，我们会发现一些有趣的地方。

考虑(0,1)区间的ln(x)函数，

ln(x)在(0,1)区间是单调递增的，

并且ln(1) = 0，ln(0) = 负无穷大。

等比例衰减运动的线段总长L在Naplog函数的作用

跟单位1在ln(x)函数中的作用一样

这种对应关系，不是简单巧合，恰恰说明了

Naplog函数符合某种对数函数的形式

以上的说明结束后，现在

让我们用现代数学语言整理一下纳皮尔对数的定义

想法有受到数学长征网的一篇帖子启发（http://www.mathmarch.com/），谢谢

先来看看等比例衰减运动，点Q在线段CD上运动，线段总长是L。

我们可以将等比例衰减运动看成自变量，匀速运动是因变量

设xn表示点Q运动到Bn点时，点Q和线段D的距离|QD|,这个距离同时是|BnD|，

n表示时间t

根据上面的讨论我们可以知道 xn = |BnD| = L * (1 - r)^n

上面的公式中，L,r是常数，n是与时间有关的变量。

于是我们考虑函数x(t) = L(1-r)^t

这个函数是指数函数，指数函数是初等函数中的一种。

两边求对数，得到

所以ln(x) = ln(1 - r) * t + ln(L)  式一

有因为两种运动是同步的，时间是一样的

那么我们设点P运动的距离为y

y = vt 推导可以得到 t = y/v

代入上式一，可以得到

ln(x) - ln(L) = ln(1 - r) * y / v

整理可以得到 

y = ln(x/L) / ln(1 - r) * v = Naplog(x)

我们可以看到，纳皮尔所定义的对数，

与我们数学课本上所定义的对数，是等价的。

我们通过设置合适的三个参数(L, r, v)，可以使得Naplog函数就是对数函数ln(x)

我们将在下面讲讲纳皮尔选择的参数是什么，以及选择这些参数可能的原因是什么。

纳皮尔选择的参数，如果不花费些时间还真很难理解为什么。

以上就是《奇妙的对数定理说明书》第一章节里最重要最基础的思想内涵了。

也是对数诞生的基石，正是这些想法支撑了纳皮尔对数学的贡献

#纳皮尔对数的性质

下面我们将简要的讲解第二章。现在让我们来看纳皮尔对数的性质

第二章描述了对数的性质，以文本形式给出了一些用于处理比率的公式命题。

阅读这种文本形式的命题可真是要了我的老命

太难懂了。我这里先放出第二章第一个命题的英文原文（含命题与证明），

大家感兴趣可以暂停看看自己能不能读懂这么一大段话，

或者暂停尝试读懂chatgpt给出的翻译，理解命题在说什么，是怎么证明的呢？

这一个命题说的是，比例量的对数是等距的。是不是还是不好懂？

让我们来解读一下这个命题。

假设有一个等比数列{an}，为{a，aq， aq^2，aq^3，....，aq^n}

这里的每一项前后都是成比例的

我们再假定选取了参数使得Naplog函数就是ln(x)函数。

那么对数函数的知识来解释就特别容易了。

令ln(a) = g，ln(q) = h

那么数列{ln(an)}:{g，g+h，g+2h，g+3h，....，g+nh} 

毫无疑问这是首项是g，公差是h的等差数列。等差数列自然前后两项等距。

而看纳皮尔对于这个命题的证明，则是借助了图形的说明

他就利用了两种运动里存在的等比关系和等差关系，以及运用对数对等比关系做处理，

使得等比和等差一一对应到图形上的点。从而证明是等距的 进而证明了这个问题

在第2章里都是这种以文本形式，证明有关对数的命题。

纳皮尔格外关注三个或者4个成比例的数，并且关注它们的对数之间的关系，

例如下面这一个命题。

命题：{a，aq， aq^2}三个数的对数{o，p，q}满足q = 2p - o

借助上面的介绍可以知道{o=g, p=g+h, q=g+2h}，可以很容易验证这个命题。

第2章的内容我们就介绍到这里了。

这些命题在当时纳皮尔看来，也许并没有那么直观

不过在现在数学符号支持下，我们可以很容易证明这些命题的内容。

第二章文章结尾有一条注释，指出他将推迟发表他关于构造对数的工作，

直到他看到他的发明如何被接受为止。

不得不说这是一个遗憾，大家都很接受他所创造出来的对数。

但是他没有等到构造那一本书出版就已经与世长辞了。

无论如何，纳皮尔在这本说明书上的第3章还是详细的

介绍了他的表格的格式以及每一行没一列的具体含义。

感谢他的工作。
# 纳皮尔对数表的含义

经过了漫长的准备时间，我们终于可以回到我们最开始准备的问题上了。

我们要读懂纳皮尔对数表。

在正式的开始之前，我们先聊点背景知识。

在纳皮尔的那个时代，航海已经开始发展。带动了天文学的需要。

天文的数字处理需要三角学的知识，三角学中繁琐的乘除计算等等不变

是促使纳皮尔发明对数最直接的原因

这也是这本说明书副标题《其不仅在三⻆学中的应⽤，⽽且在所有数学

计算中的应⽤，都以最全⾯、最容易和最快捷的⽅式得到解释》的由来。

也正是因为三角学的需要，实际上纳皮尔制作的表格

关注的是多少度多少分的角度，以及这个角度对应的正弦值正切值以及余弦值。

以及这些值所对应的对数。而不是我们简单理解上的对数表。

现在让我们回到纳皮尔对数定义的式子上。

y = Naplog(x) = ln(x/L) / ln(1 - r) * v

根据维基百科上的资料纳皮尔对数实际上是这个样子的

Naplog(x) = -10^(7) * ln(x / 10^7)

这是一个初看下令人相当费解的定义

实际上纳皮尔在这本说明书中,除了给定了线段长L为10的7次方之外。

并没有详细的说明其他两个选取了哪个参数。

我们拿正弦值来举例，说明一下这一个式子。

在角度θ从零度角变换到90度角的过程中。

正弦值sin(θ)从0变换到1，是一个小数。

关于小数点这里有一个数学史上的小趣闻，

在维基百科对数的历史的页面上，有这么一句话

“纳皮尔率先在数值计算中使用小数点，直到下个世纪才变得普遍。”

纳皮尔使用小数点是在构造那本书上。

即使纳皮尔率先使用小数点，但是他也不喜欢操作小于一的小数。

所以一个简单的方法就是进行缩放或者说放大，乘以一个系数。

纳皮尔为正弦值的放大选择了一个系数，系数为10^7

我并没有在资料上看到纳皮尔选择这个系数的原因，

也许是为了小数点后的有7位有效数字，

总之，纳皮尔所说的正弦值与我们现代意义上的正弦值存在些许差异

具体差异如下。

Napsin(θ) = int(10^7 * sin(θ))

int()表示取整。以及所有角度都采用角度制，注意角度弧度的区别

举例来说，

Napsin(30度) = int(10^7 * sin(30度)) = 5 * 10^6 = 5，000，000

Napsin(0度1分) = int(10^7 * sin(0度1分)) = 2909

我们可以用python math库验证一下0度1分的值

10**7 * math.sin(1/60 * math.pi/180) = 2908.882

也不知道是巧合还是刻意为之，

总之纳皮尔将等比例衰减运动的线段长与正弦值的放大系数设置成了一样。

我倾向于认为纳皮尔故意这么做的，下面是我的解释，可能有误，大家听个乐

首先要考虑的是纳皮尔正弦值的对数，

令x = Napsin(θ)，

那么

Naplog(x) = Naplog(Napsin(θ)) = Naplog(int(10^7 * sin(θ))) 带入定义并且忽略取整带来的误差

约等于 -10^(7) * ln(sin(θ))

实际上还是取得ln(sin(θ))数值，

并且由于sin(θ)在0到1之间，所以ln(sin(θ))在负无穷大到0之间。

纳皮尔也不喜欢负数。同时在角度靠近90度的时候。角度的正弦值接近一

此时对数的值接近0。

为了避免小数计算。同样放大了10的7次方，并且取负数。

这样我们就可以保证纳皮尔对数的数值大于零。

以上是我个人的一点点想法。

对于纳皮尔来说，他都没有对数函数的一些知识，他肯定不会是这么去考虑的。

所以要猜测纳皮尔的想法的话，还是需要去找到他那时候已经掌握的数学工具。

一张的正弦表以及对数的内涵，

等比例衰减运动和匀速运动的对应关系。

正弦表的资料比较少，我并没有搜索到纳皮尔所能接触到的正弦表的精度

有尝试过询问ChatGPT，他跟我说那个时代所能接触到的正弦表的精度可能只有小数点后两位到三位。

不过在这本说明书上，纳皮尔所给出的所有的正弦值都有7位有效数字。

这7位有效数字已经足够区分每一度每一分的区别。

不清楚他是自己算的还是如何获得？

无论如何，我们就假定纳皮尔的手边有一本精度可以达到7位有效数字的正弦表

然后根据正弦表上的数字来决定选取什么样的参数，使得它的对数满足一些比较好的性质。

至少要达到的要求就是角度每变化一分，它正弦值的对数至少能移动一个单位。

在这种情况下对数才是一一对应的，不至于有冲突。

我这里有一份Python代码生成的表格，表格的内容关于89度到90度之间每一分的正弦值。

了解正弦函数的都应该清楚，正弦函数在0到90度之间是单调递增的。

并且变化的速度也是单调递减的。所以越靠近90度，角度的每一分变化带来正弦值的差别越小

我们观察表格也可以确认确实是这样。

在0~90度的角度范围内。角度每变换一分，带来的正弦值差别最小的值。

就是89度59分到90度之间的差值。

90度角自然不用说它的正弦值是1，它的纳皮尔正弦值是10的7次方。

89度59分，它的正弦值是0.9999999576，它的纳皮尔正弦值是9999999。

注意这里的取整并不是四舍五入。

或者说纳皮尔，他并没有四舍五入的想法。

他只是希望说能够区分这一分角度差所带来的正弦值上的差别。

剩下的角度上的每一分差别，所带来的纳皮尔正弦值的差别都将大于1个单位。

也许他正是观察到了这么一个现象。

所以他将正弦值的放大倍率和等比例衰减运动的线段长都设置为了10的7次方。





下面我们具体来讲讲开头给出的30度角的表格，每一个角度对应的表格都有七列六十行。

我们需要看到是左上角的30这个数字，以及右下角59这个数字。

这个意味着这两张表的内容都是关于30度角和59度角。

每页的第一列是以分为单位的角度增量，

第一列第一行，表示30度0分，

第一列第二行，表示30度1分，

第7列是要每页底部右下角的度数值的分钟。

这种排列使得对于页面上的每一行，第 7 列表示的全角是第 1 列的余角 (90° – column_1)

第七列第一行，表示59度60分，也就是60度

第七列第二行，表示59度59分，

第二列和第六列是相邻的角度的正弦值，

第二列第一行，表示30度0分的正弦值，

第六列第一行，表示59度60分（60度）的正弦值。

第三列和第五列是相邻正弦值的纳皮尔对数值，

第三列第一行，表示30度0分的对数值Naplog(30)，

第五列第一行，表示59度60分（60度）的对数值Naplog(60)。

第四列是第三第五列的差值，而根据数学知识可以知道，这正是正切值的纳皮尔对数。

通过阅读整个页面到第 5 列，可以轻松获得第 1 列的对数余弦，反之亦然




难以想象，纳皮尔最开始对于对数的定义完全不依赖自然对数，指数函数，微积分等数学概念

但是他给出的定义又是如此的简洁明了

确实在这样的定义下，可以大大简化乘除等运算的步骤

难怪18世纪法国的大数学家拉普拉斯说，

“让天文学家的寿命延长了许多倍”


# 例子

# 第二本著作

# 例子

# 意义和总结
